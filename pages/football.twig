{% extends 'app.twig' %}
{#% cache 'header' ~ cacheKey %#}
{#% include('partials/header.twig') %#}
	{% block MAIN %}
	{% set dlcatalog = runSnippet('DocLister', {
id: 'accordion',
display: 20,
parents: 2,
depth: 3,
tvList:'date,department,pay,hh_link,in_link,special,rang,duties,requirements,dop_mail,dotadesc,dotatitle,image1,image2,stack,footballdesk,footballimg,footballpos,footballtitle',
ownerTPL: '@CODE:[+dl.wrap+]',
tpl:'@T_FILE:partials/accordeon',
debug: 0,
tvPrefix: '',
api: 1,
})
|json %}


		<body
		class="main__body"> <!-- Header -->
		<header
			class="header header-game">
			<!-- Navbar -->
			<nav class="nav">
				<div class="navbar">
					<div class="logo">
						<a href="#">
							<img src="templates/img//logo.svg" alt="logo">
						</a>
					</div>
					<ul class="menu">
						<li class="menu__item">
							<a href="#about" class="menu__item-link" data-scroll>О компании</a>
						</li>
						<li class="menu__item">
							<a href="#team" class="menu__item-link" data-scroll>Data Team</a>
						</li>
						<li class="menu__item">
							<a href="#stack" class="menu__item-link" data-scroll>Наш стек</a>
						</li>
						<li class="menu__item">
							<a href="#vakancy" class="menu__item-link" data-scroll>Вакансии</a>
						</li>
					</ul>
					<div class="burger">
						<svg width="24" height="20" viewbox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg">
							<g clip-path="url(#clip0_207_2847)">
								<path d="M20.8802 19.999C17.7821 19.999 18.565 20.001 15.467 19.9981C14.3349 19.9971 13.4182 19.2627 13.1664 18.1714C12.9098 17.0572 13.4191 15.8975 14.4169 15.4318C14.7273 15.2868 15.094 15.1956 15.4355 15.1946C21.6548 15.1806 14.7773 15.182 20.9966 15.1864C22.2189 15.1874 23.2244 16.123 23.3219 17.3196C23.43 18.6496 22.6404 19.7439 21.4025 19.967C21.2265 19.9985 21.0426 19.9971 20.8627 19.9976C17.7962 19.999 23.9461 19.999 20.8797 19.9985L20.8802 19.999Z" fill="black"/>
								<path d="M14.0924 4.81697C11.0182 4.81697 13.28 4.80145 10.2057 4.82376C8.8151 4.83395 7.98373 3.82262 7.80814 2.87532C7.52584 1.35276 8.62011 0.00432097 10.1689 0.00189573C13.117 -0.00198466 10.7301 0.000925634 13.6782 0.000925634C16.9096 0.000925634 17.7157 -0.00101456 20.9466 0.00189573C22.0322 0.00286583 22.8975 0.635369 23.222 1.64961C23.5446 2.65899 23.19 3.77315 22.3533 4.38722C21.9095 4.71317 21.4084 4.81988 20.8661 4.81891C17.8001 4.81358 17.1589 4.81649 14.0929 4.81649L14.0924 4.81697Z" fill="black"/>
								<path d="M11.6453 12.4055C8.55553 12.4055 5.46528 12.407 2.37552 12.4051C1.17066 12.4041 0.248587 11.6096 0.0356509 10.3994C-0.162734 9.26971 0.483836 8.11433 1.55191 7.73647C1.80559 7.64674 2.08886 7.60017 2.35855 7.59969C8.56959 7.59241 14.7811 7.59241 20.9922 7.59532C22.2024 7.59581 23.2064 8.51304 23.3199 9.70043C23.446 11.0207 22.6569 12.1422 21.4307 12.3716C21.2546 12.4046 21.0707 12.4041 20.8908 12.4046C17.8088 12.4065 14.7268 12.406 11.6448 12.406L11.6453 12.4055Z" fill="black"/>
							</g>
							<defs>
								<clipPath id="clip0_207_2847">
									<rect width="23.3396" height="20" fill="white"/>
								</clipPath>
							</defs>
						</svg>
					</div>
				</div>
			</nav>
		</header>
		<!-- Main Page -->
		<main>
			<div id="fullpage">
				<div class="section">
					<section class="test test-2">
						<div class="container">
							<div class="test__inner">
								<div class="test__info">
									<div class="test__top">
										<img class="test__top-img" src="templates/img/test/test-dot.png" alt="">

										<p class="test__top-text">
											НАШ МАНИФЕСТ
										</p>
									</div>


									<h2 class="test__title">
										Самый игровой DATA<br>
										SCIENCE!
									</h2>

									<p class="test__descr">
										Прокачал себя в банках, страховых, ECOM и телеке? Надоело? Приходи к нам! Полная стата по всему существующему
																																																																						          спорту! Не типовые задачи, крутой коллектив, релокация в Белград.
									</p>

									<a class="test__link" href="#" id="moveSectionDown">
										Посмотреть все вакансии
									</a>

									<div class="test__slider-container">
										<div class="test__slider swiper mySwiper">
											<div class="test__slider-wrapper swiper-wrapper">

												{% for data in dlcatalog %}
													<div class="test__slide  swiper-slide">
														<div class="test__slide-top">
															<div class="test__slide-top-vacansy">
																<svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
																	<path d="M13.6049 10.8978C12.8907 10.124 12.0241 9.50648 11.0595 9.08413C10.095 8.66178 9.0534 8.44374 8.00043 8.44374C6.94746 8.44374 5.9059 8.66178 4.94135 9.08413C3.97679 9.50648 3.11015 10.124 2.39599 10.8978C2.28573 11.0197 2.22405 11.1778 2.22266 11.3422V14.0089C2.22499 14.1841 2.29626 14.3514 2.42103 14.4745C2.54581 14.5977 2.71404 14.6667 2.88932 14.6667H13.1115C13.2884 14.6667 13.4579 14.5964 13.5829 14.4714C13.708 14.3464 13.7782 14.1768 13.7782 14V11.3333C13.7747 11.172 13.7131 11.0174 13.6049 10.8978Z" fill="white"/>
																	<path d="M7.99978 7.55555C9.718 7.55555 11.1109 6.16266 11.1109 4.44444C11.1109 2.72622 9.718 1.33333 7.99978 1.33333C6.28156 1.33333 4.88867 2.72622 4.88867 4.44444C4.88867 6.16266 6.28156 7.55555 7.99978 7.55555Z" fill="white"/>
																</svg>
																{{data.footballtitle}}
															</div>

															<div class="test__slide-top-time">
																{{data.date |date("d.m.Y")}}

															</div>
														</div>

														<div class="test__slide-info">
															<img class="test__slide-icon" src="{{data.footballimg}}" alt="">

															<div class="test__slide-texts">
																<h4 class="test__slide-label">
																	{{data.rang}}
																</h4>

																<p class="test__slide-descr">
																	{{data.footballdesk}}
																</p>
															</div>

															<div class="test__slide-power">
																<div class="test__slide-power-img"></div>
																<div class="test__slide-power-text">
																	ЗАЩИТА
																</div>
															</div>
														</div>
													</div>
												{% endfor %}
											</div>
										</div>

									</div>

								</div>

							</div>
						</div>
					</section>
				</div>
				<div class="section">
					<a name="vacancytop"></a>
					<section class="char char-2">
						<div class="container">
							<div class="char__inner">
								<div class="char__select">
									<h3 class="char__title">
										Выбери свою позицию
									</h3>

									<ul class="char__select-list">
										{% for data in dlcatalog %}
											<li class="char__select-item">
												<a href="#vacancybot">
													<img class="char__select-avatar" src="{{data.footballimg}}" alt="">
													<p class="char__select-name">
														{{data.footballtitle}}
													</p>
													</a>
											</li>
											{% endfor %}
										</ul>


										{#<div class="char__map">
																				<div class="char__map-city">
																					<img class="char__map-img" src="templates/img/char/char-map.png" alt="">
										
																					<p class="char__map-descr">
																						“Играть” будем
																																																																																		              на карте Белграда
																					</p>
																				</div>
										
																				<a class="char__map-link" href="#">+5 веских причин, почему стоит работать в нашей компании
																																																												</a>
									</div>#}
								</div>

								<a name="vacancybot"></a>
								<div class="char__info-slider swiper mySwiper">
									<a class="char__slide-top" style="top: 0px;" href="#vacancytop"><img src="templates/img/backtop.svg" alt=""></a>
									<div class="char__info-wrapper swiper-wrapper">
										{% for data in dlcatalog %}

											<div class="char__info swiper-slide">
												<div class="char__info-inner ">
													<div class="char__info-top">
														<img class="char__info-top-char" src="{{data.footballpos}}" alt="">

														<h4 class="char__info-top-name">
															{{data.footballtitle}}
														</h4>

														<h5 class="char__info-top-label">
															{{ data.rang }}

														</h5>
													</div>


													<div class="char__info-middle">
														{{data.stack | raw}}
													</div>
													<p class="char__info-descr">
														{{data.footballdesk}}

													</p>

													<a class="char__info-link" href="#" data-vacancy-idb="{{data.id}}">Перейти в вакансию</a>
												</div>
											</div>
										{% endfor %}

									</div>
								</div>
							</div>
						</div>
					</section>
				</div>
				<div class="section">
					<section>
						<div class="job game-job job-3" style="min-height:100vh">
							<div class="container">
								<div class="job__main">
									<div class="job__header">
										<div class="job__head">Дата</div>
										<div class="job__head">Вакансия</div>
										<div class="job__head">Отдел</div>
										<div class="job__head">Условия оплаты труда</div>
										<div class="job__head">Вакансия
											<br>
											на площадках</div>
									</div>
									<!-- Accordion -->
									<div class="accordion" style="display:none" id="vacanyjson">
										{{runSnippet('DocLister', {
                id: 'accordion',
                display: 20,
                parents: 2,
                depth: 2,
                tvList:'date,department,pay,hh_link,in_link,special,rang,duties,requirements,teststudy',
                ownerTPL: '@CODE:[+dl.wrap+]',
                tpl:'@T_FILE:partials/accordeon2',
                debug: 0,
                }) |raw
                }}
									</div>
									<div class="accordion" id="vacanyhtml" style="
										    padding-top: 110px;
										"></div>
								</div>
							</div>
						</div>
					</section>
				</div>
				<section>
					<div class="section">
						<div class="footer-form footer-form-game footer-form-3">
							<div class="container">
								<div class="footer-form__inner">
									<div class="footer-form__top">
										<div class="footer-form__top-label">
											Свяжитесь с нами
										</div>
										<h4 class="footer-form__title">
											Простая форма для большого
											<br>
											шага вперед!
										</h4>
									</div>
									<div class="footer-form__main">
										<div class="footer-form__main">
											{{ runSnippet('Form', {
            formid: 'feedback',
            path: '/templates/partials/forms/withfile/',
            extension: 'twig',
            to: 'jacov911@ya.ru',
        }) | raw }}
										</div>
									</div>
								</div>
							</section>
							{#<section>
																		<div class="section">
																			<div class="footer-form footer-form-game">
																				<div class="container">
																					<div class="footer-form__inner">
																						<div class="footer-form__top">
																							<div class="footer-form__top-label">
																								Свяжитесь с нами
																							</div>
																							<h4 class="footer-form__title">
																								Простая форма для большого
																								<br>
																								шага вперед!
																							</h4>
																						</div>
																						<div class="footer-form__main">
																								<div class="footer-form__main">
																									
																								</div>
																						</div>
																					</div>
																				</section>#}
						</div>
					</div>
				</body>
			</main>
			<script>


				window.onload = function () {
new fullpage('#fullpage', {
// options here
// autoScrolling: true,
// scrollHorizontally: true,
sectionSelector: '.section',
anchors: [
'vacancy-char', 'lastPage'
],
licenseKey: 'gplv3-license'
});
fullpage_api.setAllowScrolling(false);
// fullpage_api.setKeyboardScrolling(false);
fullpage_api.setRecordHistory(false);


};
			</script>
			<script>
				// Обработчик события при клике на ссылку на вакансию
function handleClick(event) {
event.preventDefault();

const vacancyId = event.target.getAttribute('data-vacancy-idb');
const vacancyBlock = document.querySelector (`[data-vacancy-id="${vacancyId}"]`);
const vacancyHtml = vacancyBlock.outerHTML;

const targetBlock = document.getElementById('vacanyhtml');
targetBlock.innerHTML = vacancyHtml;

// Прокрутка до блока с данными
targetBlock.scrollIntoView({behavior: 'smooth'});

// Добавляем класс 'active' к элементу с атрибутом data-vacancy-id
vacancyBlock.classList.add('active');

// Добавляем обработчики событий после обновления содержимого
addVacancyButtonListeners();
}

// Функция для добавления обработчиков событий на кнопки "Перейти в вакансию"
function addVacancyButtonListeners() {
const vacancyButtons = document.querySelectorAll('[data-vacancy-idb]');

Array.from(vacancyButtons).forEach(function (button) {
button.addEventListener('click', handleClick);
});
}

document.addEventListener('DOMContentLoaded', function () { // Добавляем обработчики событий для первоначальной установки
addVacancyButtonListeners();

// Находим ссылку
var link = document.querySelector('.accordion__header-btn');

// Добавляем обработчик события клика
link.addEventListener('click', function (event) {
event.preventDefault(); // Отменяем переход по ссылке

var url = this.getAttribute('data-url');
// Получаем URL из атрибута data-url

// Создаем AJAX-запрос
var xhr = new XMLHttpRequest();
xhr.open('GET', url, true);

xhr.onload = function () {
if (xhr.status === 200) {
var response = xhr.responseText;
var mainDiv = document.querySelector('.footer-form__main');

mainDiv.innerHTML = response;
// Заменяем содержимое раздела

// Добавляем обработчики событий после обновления содержимого
addVacancyButtonListeners();
}
};

xhr.send();
});
});
			</script>
		{% endblock %}
